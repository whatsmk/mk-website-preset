!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("MK.metaEngine"),require("MK.utils"),require("react"),require("immutable")):"function"==typeof define&&define.amd?define(["MK.metaEngine","MK.utils","react","immutable"],n):"object"==typeof exports?exports.MKApp_mk_website_preset=n(require("MK").metaEngine,require("MK.utils"),require("react"),require("immutable")):e.MKApp_mk_website_preset=n(e["MK.metaEngine"],e.MK.utils,e.React,e.Immutable)}(window,function(e,n,t,o){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={webapi:function(e){return e&&e.__esModule?e:{default:e}}(t(14)).default,webapiMap:{}};function i(e){e&&Object.assign(o,e)}i.current=o,n.default=i,e.exports=n.default},function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={};n.default={fixPath:function(e){if(!e)return e;var n=e;if(o[n])return o[n];var t=[];return e.split(".").reduce(function(e,n){return e?t.push(e+"."+n)&&e+"."+n:t.push(""+n)&&""+n},""),o[n]=t.join(" && "),o[n]}},e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getMeta=function(){return{name:"root",component:"::div",_visibile:!1}},n.getInitState=function(){return{data:{}}}},function(e,t){e.exports=n},function(e,n,t){e.exports=t(6)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(1),i=t(7),r=t(13);t.p=window["__pub_"+r.name+"__"];var a=t(3),l=t(0);t(15),t(16),MK&&MK.metaEngine.templateFactory.registerTemplates([{name:"iconButton",templateHandler:i.iconButton},{name:"button",templateHandler:i.button},{name:"sortMenu",templateHandler:i.sortMenu},{name:"readonlyGrid",templateHandler:i.readonlyGrid},{name:"form",templateHandler:i.form},{name:"editableGrid",templateHandler:i.editableGrid}]),n.default={name:r.name,version:r.version,description:r.description,meta:a.getMeta(),components:[],config:l,load:function(e){e(o.defaultComponent,t(18),t(20))}},e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.sortMenu=n.button=n.iconButton=n.editableGrid=n.readonlyGrid=n.form=void 0;var o=t(8),i=t(9),r=t(10),a=t(11),l=t(12);n.form=o.form,n.readonlyGrid=i.readonlyGrid,n.editableGrid=i.editableGrid,n.iconButton=r.iconButton,n.button=a.button,n.sortMenu=l.sortMenu},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=t(2);function r(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}n.default={form:function(e){e.name;var n=e.className,t=void 0===n?"simple-modal-card-form":n,a=e.items,l=(e.component,r(e,["name","className","items","component"])),d=o({name:"form",component:"Form",className:t,children:[]},l);return a.forEach(function(e){var n=void 0;switch(e.type){case"treeSelect":n=function(e){var n=e.name,t=e.title,a=e.required,l=e.bindPath,d=e.disabled,c=void 0!==d&&d,u=e.dsPath,m=e.idField,s=void 0===m?"id":m,p=e.codeField,f=void 0===p?"code":p,h=e.displayField,b=void 0===h?"name":h,v=e.loopTreeSelectChildren,w=void 0===v?"loopTreeSelectChildren":v,x=e.onFocus,y=e.treeFind,_=void 0===y?"treeFind":y,g=e.childrenProp,P=void 0===g?"children":g,C=(e.component,e.type,r(e,["name","title","required","bindPath","disabled","dsPath","idField","codeField","displayField","loopTreeSelectChildren","onFocus","treeFind","childrenProp","component","type"]));n=n||l.replace(".","&");var F=(0,i.fixPath)(l+"."+s),I=(0,i.fixPath)(l+"."+f),k=(0,i.fixPath)(l+"."+b);return{name:n,component:"Form.Item",label:t,required:a,children:[o({name:n,component:"TreeSelect",treeDefaultExpandAll:!0,allowClear:!0,dropdownMatchSelectWidth:!1,dropdownStyle:{maxHeight:400,overflow:"auto"},onChange:"{{(v)=>{\n                $sf('"+l+"', $fromJS($"+_+"("+u+",v, '"+s+"', '"+P+"'), null) || {id:null})\n            }}}",onFocus:x?"{{$"+x+"(data)}}":void 0,value:"{{{\n                return ("+u+" && "+F+") || ( ("+I+") && ('(' + ("+I+") + ')' + ("+k+") )) || ''\n            }}}",children:"{{$"+w+"("+u+", '"+P+"', '"+s+"', '"+b+"', '"+f+"')}}",disabled:c},C)]}}(e);break;case"input":n=function(e){var n=e.name,t=e.title,a=e.required,l=e.bindPath,d=e.disabled,c=(e.component,e.type,e._power),u=e._visible,m=r(e,["name","title","required","bindPath","disabled","component","type","_power","_visible"]);return{name:n=n||l.replace(".","&"),component:"Form.Item",label:t,required:a,children:[o({name:n,component:"Input",value:"{{"+(0,i.fixPath)(l)+"}}",onChange:d?void 0:"{{(e)=>$sf('"+l+"',e.target.value)}}",disabled:d},m)],_power:c,_visible:u}}(e);break;case"number":n=function(e){var n=e.name,t=e.title,a=e.required,l=e.bindPath,d=e.disabled,c=(e.component,e.type,r(e,["name","title","required","bindPath","disabled","component","type"]));return{name:n=n||l.replace(".","&"),component:"Form.Item",label:t,required:a,children:[o({name:n,component:"Input.Number",value:"{{"+(0,i.fixPath)(l)+"}}",onChange:d?void 0:"{{(v)=>$sf('"+l+"',v)}}",disabled:d},c)]}}(e);break;case"checkbox":n=function(e){var n=e.name,t=e.title,a=e.required,l=e.bindPath,d=e.disabled,c=(e.component,e.type,r(e,["name","title","required","bindPath","disabled","component","type"]));return{name:n=n||l.replace(".","&"),component:"Form.Item",label:t,required:a,children:[o({name:n,component:"Checkbox",checked:"{{"+(0,i.fixPath)(l)+"}}",onChange:d?void 0:"{{(e)=>$sf('"+l+"',e.target.checked)}}",disabled:d},c)]}}(e);break;case"datePicker":n=function(e){var n=e.name,t=e.title,a=e.required,l=e.bindPath,d=e.disabled,c=(e.component,e.format),u=(e.type,r(e,["name","title","required","bindPath","disabled","component","format","type"]));return n=n||l.replace(".","&"),c=c||"YYYY-MM-DD",{name:n,component:"Form.Item",label:t,required:a,children:[o({name:n,component:"DatePicker",value:"{{$stringToMoment("+(0,i.fixPath)(l)+")}}",onChange:d?void 0:"{{(v)=>$sf('"+l+"', $momentToString(v,'"+c+"'))}}",disabled:d,format:c},u)]}}(e);break;case"select":n=function(e){var n=e.name,t=e.title,a=e.required,l=e.bindPath,d=e.disabled,c=void 0!==d&&d,u=e.dsPath,m=e.idField,s=void 0===m?"id":m,p=e.codeField,f=e.displayField,h=void 0===f?"name":f,b=e.titleField,v=(e.loopTreeSelectChildren,e.onFocus),w=(e.treeFind,e.childrenProp,e.valueIsObj),x=void 0===w||w,y=(e.component,e.type,r(e,["name","title","required","bindPath","disabled","dsPath","idField","codeField","displayField","titleField","loopTreeSelectChildren","onFocus","treeFind","childrenProp","valueIsObj","component","type"]));return n=n||l.replace(".","&"),b=b||h,{name:n,component:"Form.Item",label:t,required:a,children:[o({name:n,component:"Select",showSearch:!0,treeDefaultExpandAll:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},dropdownMatchSelectWidth:!1,notFoundContent:" ",allowClear:!0,onChange:"{{{\n               return (v)=> {\n                   if(!v){\n                    $sfs({\n                        '"+l+"': null,\n                        '"+l+"Id': null\n                     })   \n                     return\n                   }\n\n                   if("+x+"){\n                       if(!v){$sf('"+l+"', undefined)}\n                       $sfs({\n                           '"+l+"': $fromJS("+u+".find(o=>o."+s+"==v), null)\n                        })    \n                   }\n                   else{\n                        $sf('"+l+"', v || '')    \n                   }\n               }\n            }}}",onFocus:v?"{{$"+v+"(data)}}":void 0,value:"{{{\n                if("+x+"){\n                    return ("+u+" && "+(0,i.fixPath)(l+"."+s)+") || ( "+(0,i.fixPath)(l+"."+b)+") || ''\n                }\n                else{\n                    return (("+(0,i.fixPath)(l)+") && ("+(0,i.fixPath)(l)+")) || ''\n                }\n            }}}",optionLabelProp:"title",optionFilterProp:"filter",children:{name:"option",component:"Select.Option",value:"{{ "+u+" && "+u+"[_rowIndex]."+s+" }}",title:"{{ "+u+" && "+u+"[_rowIndex]."+b+" }}",filter:"{{{\n                    var id =  "+u+" && "+u+"[_rowIndex]."+s+"\n                    var code =  "+u+" && "+u+"[_rowIndex]."+(p||"code")+"\n                    var display =  "+u+" && "+u+"[_rowIndex]."+h+"\n                    return code ? (id+code+display) : (id+display)\n                }}}",children:p?"{{ "+u+" && '(' + "+u+"[_rowIndex]."+p+" + ')' + "+u+"[_rowIndex]."+h+" }}":"{{ "+u+" && "+u+"[_rowIndex]."+h+" }}",_power:"for in "+u},disabled:c},y)]}}(e);break;case"multiSelect":n=function(e){var n=e.name,t=e.title,i=e.required,a=e.bindPath,l=e.disabled,d=void 0!==l&&l,c=e.dsPath,u=e.idField,m=void 0===u?"id":u,s=e.codeField,p=e.displayField,f=void 0===p?"name":p,h=e.titleField,b=e.relaField,v=(e.loopTreeSelectChildren,e.onFocus),w=(e.treeFind,e.childrenProp,e.valueIsObj,e.component,e.type,r(e,["name","title","required","bindPath","disabled","dsPath","idField","codeField","displayField","titleField","relaField","loopTreeSelectChildren","onFocus","treeFind","childrenProp","valueIsObj","component","type"]));return n=n||a.replace(".","&"),h=h||f,{name:n,component:"Form.Item",label:t,required:i,children:[o({name:n,component:"Select",dropdownStyle:{maxHeight:400,overflow:"auto"},dropdownMatchSelectWidth:!1,notFoundContent:" ",allowClear:!1,onChange:"{{{\n               return (v)=> {\n                   var sels = []\n                   v.forEach((o)=>{\n                        let hit = "+c+".find(x=>x."+m+"==o)\n                        if(hit){\n                            let hit1 = "+a+".find(x=>x."+b+"==o)\n                            let relaObjField = '"+b+"'\n                            relaObjField = relaObjField.substr(0,relaObjField.length -2 )\n                            if(hit1){\n                                sels.push({\n                                    ...hit1,\n                                    [relaObjField]:hit\n                                })\n                            }\n                            else{\n                                sels.push({\n                                    [relaObjField]:hit,\n                                    "+b+":hit.id\n                                })\n                            }\n                        }\n                   })\n                   $sf('"+a+"', $fromJS(sels,null))    \n               }\n            }}}",onFocus:v?"{{$"+v+"(data)}}":void 0,value:"{{{\n                if(!"+a+") return\n                let relaObjField = '"+b+"'\n                relaObjField = relaObjField.substr(0,relaObjField.length -2 )\n                if("+c+"){\n                    var ret = "+a+".reduce((a,b)=> {a.push(b."+b+"+''); return a;}, [])\n                    return ret.length > 0 ? ret : []\n                }\n                else{\n                    var ret =  "+a+".reduce((a,b)=>{a.push(b[relaObjField].name); return a;},[])\n                    return ret.length > 0 ? ret : []\n                }\n                \n            }}}",optionFilterProp:"filter",children:{name:"option",component:"Select.Option",key:"{{ "+c+" && "+c+"[_rowIndex]."+m+" }}",filter:"{{{\n                    var id =  "+c+" && "+c+"[_rowIndex]."+m+"\n                    var code =  "+c+" && "+c+"[_rowIndex]."+(s||"code")+"\n                    var display =  "+c+" && "+c+"[_rowIndex]."+f+"\n                    return code ? (id+code+display) : (id+display)\n                }}}",children:s?"{{ "+c+" && '(' + "+c+"[_rowIndex]."+s+" + ')' + "+c+"[_rowIndex]."+f+" }}":"{{ "+c+" && "+c+"[_rowIndex]."+f+" }}",_power:"for in "+c},disabled:d},w)]}}(e);break;default:n=e}d.children.push(n)}),d}},e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i=t(2);function r(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}n.default={readonlyGrid:function(e){var n=e.name,t=void 0===n?"dataGrid":n,a=e.bindPath,l=void 0===a?"data.list":a,d=e.paginationPath,c=void 0===d?"data.pagination":d,u=e.onPageChange,m=void 0===u?"pageChanged":u,s=e.footerClassName,p=void 0===s?"f-table-content-footer":s,f=e.columns,h=(e.component,r(e,["name","bindPath","paginationPath","onPageChange","footerClassName","columns","component"])),b=[o({name:t,component:"DataGrid",headerHeight:30,rowHeight:30,enableSequence:!0,startSequence:"{{("+c+".current-1)*"+c+".pageSize + 1}}",rowsCount:"{{"+l+".length}}",onColumnResizeEndCallback:"{{$onColumnResizeEndCallback('"+t+"',data)}}",columnWidths:"{{data.other && data.other."+t+"ColumnWidths}}",columns:[]},h),{name:"footer",className:p,component:"Layout",children:[{name:"selectedCount",component:"::h3",children:"{{'选中' + $getSelectedCount('"+t+"') + '条'}}"},{name:"pagination",component:"Pagination",showSizeChanger:!0,pageSize:"{{"+c+".pageSize}}",current:"{{"+c+".current}}",total:"{{"+c+".total}}",onChange:"{{$"+m+"}}",onShowSizeChange:"{{$"+m+"}}"}]}];return f.forEach(function(e){var n,a=o({},e,{grid:t,bindPath:l});switch(e.type){case"sel":n=function(e){var n=e.grid,t=e.bindPath,i=e.bindField,a=(e.component,e.type,r(e,["grid","bindPath","bindField","component","type"]));return{name:"sel",component:"DataGrid.Column",columnKey:"sel",width:40,fixed:!0,header:{name:"header",component:"DataGrid.Cell",children:{name:"cb",component:"Checkbox",checked:"{{$isSelectAll('"+n+"')}}",onChange:"{{$selectAll('"+n+"')}}"}},cell:o({name:"cell",component:"DataGrid.Cell",children:{name:"checkbox",component:"Checkbox",checked:"{{"+t+"[_rowIndex]."+i+"}}",onChange:"{{ (e, option) => $sf('"+t+".' + _rowIndex + '."+i+"', e.target.checked ) }}"},_power:"({rowIndex})=>rowIndex"},a)}}(a);break;case"modifyAndDel":n=function(e){var n=e.bindPath,t=(e.bindField,e.onDel),o=e.onModify;return e.component,e.type,{name:"modifyAndDel",component:"DataGrid.Column",columnKey:"modifyAndDel",fixed:!0,width:70,header:{name:"header",component:"DataGrid.Cell",children:"操作"},cell:{name:"cell",component:"DataGrid.Cell",_power:"({rowIndex})=>rowIndex",children:[{name:"del",component:"Icon",showStyle:"showy",type:"close",style:{fontSize:18},title:"删除",onClick:"{{$"+t+"("+n+"[_rowIndex])}}"},{name:"modify",component:"Icon",showStyle:"softly",type:"edit",style:{fontSize:18},title:"修改",onClick:"{{$"+o+"("+n+"[_rowIndex])}}"}]}}}(a);break;case"del":n=function(e){var n=e.bindPath,t=(e.bindField,e.onDel),i=(e.component,e.type,r(e,["bindPath","bindField","onDel","component","type"]));return{name:"del",component:"DataGrid.Column",columnKey:"del",fixed:!0,width:40,header:{name:"header",component:"DataGrid.Cell",children:"操作"},cell:{name:"cell",component:"DataGrid.Cell",_power:"({rowIndex})=>rowIndex",children:[o({name:"del",component:"Icon",showStyle:"showy",type:"close",style:{fontSize:18},title:"删除",onClick:"{{$"+t+"("+n+"[_rowIndex])}}"},i)]}}}(a);break;case"link":n=function(e){var n=e.bindPath,t=e.name,i=e.title,a=e.width,l=void 0===a?130:a,d=e.flexGrow,c=void 0===d?1:d,u=e.align,m=void 0===u?"left":u,s=e.bindField,p=(e.idField,e.onClick),f=(e.component,e.type,e.fixed),h=e._visible,b=r(e,["bindPath","name","title","width","flexGrow","align","bindField","idField","onClick","component","type","fixed","_visible"]);return{name:t=t||s.replace(".","&"),component:"DataGrid.Column",columnKey:t,flexGrow:c,width:l,header:{name:"header",component:"DataGrid.Cell",children:i},cell:o({name:"cell",component:"DataGrid.Cell",className:"f-table-cell f-table-cell-"+m,children:{name:"link",component:"::a",children:"{{"+n+"[_rowIndex]."+s+"}}",onClick:"{{$"+p+"("+n+"[_rowIndex])}}"},_power:"({rowIndex})=>rowIndex"},b),fixed:f,_visible:h}}(a);break;case"boolText":n=function(e){var n=e.name,t=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=(e.required,e.align),p=void 0===s?"center":s,f=(e.component,e.type,e.fixed),h=e._visible,b=r(e,["name","bindPath","bindField","title","width","flexGrow","required","align","component","type","fixed","_visible"]);return{name:n=n||a.replace(".","&"),component:"DataGrid.Column",columnKey:n,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:l},cell:o({name:"cell",component:"DataGrid.Cell",className:"f-table-cell f-table-cell-"+p,_power:"({rowIndex})=>rowIndex",children:"{{{\n                var o = ("+(0,i.fixPath)(t+"[_rowIndex]."+a)+")\n                return (o || o == '1' || o == 'true') ? '是' : '否'\n            }}}"},b),fixed:f,_visible:h}}(a);break;case"numberText":n=function(e){var n=e.name,t=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=(e.required,e.align),p=void 0===s?"right":s,f=(e.component,e.type,e.fixed),h=e._visible,b=r(e,["name","bindPath","bindField","title","width","flexGrow","required","align","component","type","fixed","_visible"]);return{name:n=n||a.replace(".","&"),component:"DataGrid.Column",columnKey:n,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:l},cell:o({name:"cell",component:"DataGrid.Cell",className:"f-table-cell f-table-cell-"+p,_power:"({rowIndex})=>rowIndex",children:"{{"+(0,i.fixPath)(t+"[_rowIndex]."+a)+"}}"},b),fixed:f,_visible:h}}(a);break;case"datePickerText":n=function(e){var n=e.name,t=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=(e.required,e.align),p=void 0===s?"center":s,f=(e.component,e.type,e.format),h=e.fixed,b=e._visible,v=r(e,["name","bindPath","bindField","title","width","flexGrow","required","align","component","type","format","fixed","_visible"]);return n=n||a.replace(".","&"),f=f||"YYYY-MM-DD",{name:n,component:"DataGrid.Column",columnKey:n,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:l},cell:o({name:"cell",component:"DataGrid.Cell",className:"f-table-cell f-table-cell-"+p,_power:"({rowIndex})=>rowIndex",children:"{{{\n                var o = "+(0,i.fixPath)(t+"[_rowIndex]."+a)+"\n                if(!o) return ''\n                o = $stringToMoment(o)\n                return  $momentToString(o,'"+f+"')\n            }}}"},v),fixed:h,_visible:b}}(a);break;case"text":n=function(e){var n=e.name,t=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=(e.required,e.align),p=void 0===s?"left":s,f=(e.component,e.type,e.fixed),h=e._visible,b=r(e,["name","bindPath","bindField","title","width","flexGrow","required","align","component","type","fixed","_visible"]);return{name:n=n||a.replace(".","&"),component:"DataGrid.Column",columnKey:n,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:l},cell:o({name:"cell",component:"DataGrid.Cell",className:"f-table-cell f-table-cell-"+p,_power:"({rowIndex})=>rowIndex",children:"{{"+(0,i.fixPath)(t+"[_rowIndex]."+a)+"}}"},b),fixed:f,_visible:h}}(a);break;default:n=e}b[0].columns.push(n)}),b},editableGrid:function(e){var n=e.name,t=void 0===n?"grid":n,a=e.bindPath,l=e.columns,d=(e.component,e.type,r(e,["name","bindPath","columns","component","type"])),c=o({name:t,component:"DataGrid",headerHeight:30,rowHeight:30,rowsCount:"{{"+a+".length}}",enableSequence:!0,enableAddDelrow:!0,startSequence:1,readonly:!1,onAddrow:"{{$addRow('"+t+"')}}",onDelrow:"{{$delRow('"+t+"')}}",onKeyDown:"{{$gridKeydown}}",scrollToColumn:"{{data.other."+t+"ScrollToColumn}}",scrollToRow:"{{data.other."+t+"ScrollToRow}}",onColumnResizeEndCallback:"{{$onColumnResizeEndCallback('"+t+"',data)}}",columnWidths:"{{data.other && data.other."+t+"ColumnWidths}}",columns:[]},d);return l.forEach(function(e){var n=o({},e,{grid:t,bindPath:a}),l=void 0;switch(e.type){case"input":l=function(e){var n=e.grid,t=e.name,i=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=e.required,p=e.align,f=void 0===p?"left":p,h=(e.component,e.type,e.onFocus,e.fixed),b=e._visible,v=r(e,["grid","name","bindPath","bindField","title","width","flexGrow","required","align","component","type","onFocus","fixed","_visible"]);return{name:t=t||a.replace(".","&"),component:"DataGrid.Column",columnKey:t,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:[{name:"label",component:"::label",className:s?"ant-form-item-required":"",children:l}]},cell:o({name:"cell",component:"{{$isFocus(_ctrlPath) ? 'Input' : 'DataGrid.TextCell'}}",className:"{{$getCellClassName(_ctrlPath,'"+f+"')}}",value:"{{"+i+"[_rowIndex]."+a+"}}",onChange:"{{(e)=> $cellChange('"+n+"', _rowIndex, '"+a+"', e.target.value)}}",_power:"({rowIndex})=>rowIndex"},v),fixed:h,_visible:b}}(n);break;case"number":l=function(e){var n=e.grid,t=e.name,i=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=e.required,p=e.align,f=void 0===p?"left":p,h=(e.component,e.type,e.fixed),b=e._visible,v=r(e,["grid","name","bindPath","bindField","title","width","flexGrow","required","align","component","type","fixed","_visible"]);return{name:t=t||a.replace(".","&"),component:"DataGrid.Column",columnKey:t,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:[{name:"label",component:"::label",className:s?"ant-form-item-required":"",children:l}]},cell:o({name:"cell",component:"{{$isFocus(_ctrlPath) ? 'Input.Number' : 'DataGrid.TextCell'}}",className:"{{$getCellClassName(_ctrlPath,'"+f+"')}}",value:"{{"+i+"[_rowIndex]."+a+"}}",onChange:"{{(v)=> { \n                $cellChange('"+n+"', _rowIndex, '"+a+"', v)\n            }}}",_power:"({rowIndex})=>rowIndex"},v),fixed:h,_visible:b}}(n);break;case"datePicker":l=function(e){var n=e.grid,t=e.name,i=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=e.required,p=e.align,f=void 0===p?"left":p,h=e.format,b=void 0===h?"YYYY-MM-DD":h,v=(e.component,e.type,e.fixed),w=e._visible,x=r(e,["grid","name","bindPath","bindField","title","width","flexGrow","required","align","format","component","type","fixed","_visible"]);return{name:t=t||a.replace(".","&"),component:"DataGrid.Column",columnKey:t,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:[{name:"label",component:"::label",className:s?"ant-form-item-required":"",children:l}]},cell:o({name:"cell",component:"{{$isFocus(_ctrlPath) ? 'DatePicker' : 'DataGrid.TextCell'}}",className:"{{$getCellClassName(_ctrlPath,'"+f+"')}}",value:"{{{\n                return $isFocus(_ctrlPath)\n                    ? $stringToMoment("+i+"[_rowIndex]."+a+")\n                    : "+i+"[_rowIndex]."+a+" && $stringToMoment("+i+"[_rowIndex]."+a+").format('"+b+"')\n            }}}",onChange:"{{(v)=> $cellChange('"+n+"',_rowIndex, '"+a+"',  $momentToString(v,'"+b+"'))}}",_power:"({rowIndex})=>rowIndex",format:b},x),fixed:v,_visible:w}}(n);break;case"select":l=function(e){var n=e.grid,t=e.name,a=e.bindPath,l=e.bindField,d=e.title,c=e.width,u=void 0===c?130:c,m=e.flexGrow,s=void 0===m?1:m,p=e.required,f=e.align,h=void 0===f?"left":f,b=e.dsPath,v=e.valueIsObj,w=void 0===v||v,x=e.idField,y=void 0===x?"id":x,_=e.codeField,g=e.displayField,P=void 0===g?"name":g,C=e.titleField,F=e.onFocus,I=(e.component,e.type,e.fixed),k=e._visible,G=r(e,["grid","name","bindPath","bindField","title","width","flexGrow","required","align","dsPath","valueIsObj","idField","codeField","displayField","titleField","onFocus","component","type","fixed","_visible"]);return t=t||l.replace(".","&"),C=C||P,{name:t,component:"DataGrid.Column",columnKey:t,flexGrow:s,width:u,header:{name:"header",component:"DataGrid.Cell",children:[{name:"label",component:"::label",className:p?"ant-form-item-required":"",children:d}]},cell:o({name:"cell",component:"{{$isFocus(_ctrlPath) ? 'Select' : 'DataGrid.TextCell'}}",className:"{{$getCellClassName(_ctrlPath,'"+h+"')}}",optionLabelProp:"title",optionFilterProp:"filter",dropdownMatchSelectWidth:!1,notFoundContent:" ",allowClear:!0,value:"{{{\n                if( $isFocus(_ctrlPath) ){\n                    if("+w+"){\n                        return ( "+b+" && "+(0,i.fixPath)(a+"[_rowIndex]."+l+"."+y)+")\n                            || ("+(0,i.fixPath)(a+"[_rowIndex]."+l+"."+C)+") \n                            || ''\n                    }\n                    else{\n                        return  "+(0,i.fixPath)(a+"[_rowIndex]."+l)+"\n                    }\n                }\n                else{\n                    if("+w+"){\n                        return ( "+(0,i.fixPath)(a+"[_rowIndex]."+l+"."+C)+") || ''\n                    }\n                    else{\n                        var v =  "+(0,i.fixPath)(a+"[_rowIndex]."+l)+"\n                        v = "+b+" && v && "+b+".find(o=>o."+y+"==v)\n                        return  v && v."+C+"\n                    }\n                }\n            }}}",children:{name:"option",component:"Select.Option",value:"{{"+b+"[_lastIndex]."+y+"}}",title:"{{ "+b+" && "+b+"[_lastIndex]."+C+" }}",filter:"{{{\n                    var id =  "+b+" && "+b+"[_lastIndex]."+y+"\n                    var code =  "+b+" && "+b+"[_lastIndex]."+(_||"code")+"\n                    var display =  "+b+" && "+b+"[_lastIndex]."+P+"\n                    return code ? (id+code+display) : (id+display)\n                }}}",children:_?"{{ "+b+" && '(' + "+b+"[_lastIndex]."+_+" + ')' + "+b+"[_lastIndex]."+P+" }}":"{{ "+b+" && "+b+"[_lastIndex]."+P+" }}",_power:"for in "+b},onChange:"{{(v)=>{\n                var r = v || ''\n                if("+w+"){\n                    const obj = "+b+".find(o=>o."+y+"==v)\n                    r =  $fromJS(obj,undefined)\n                }\n                $cellChange('"+n+"', _rowIndex, '"+l+"', r )\n            }}}",onFocus:F?"{{$"+F+"(data,_rowIndex)}}":void 0,_excludeProps:"{{$isFocus(_ctrlPath)? ['onClick'] : ['children', 'optionLabelProp', 'onFocus'] }}",_power:"({rowIndex})=>rowIndex"},G),fixed:I,_visible:k}}(n);break;case"checkbox":l=function(e){var n=e.grid,t=e.name,i=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=e.required,p=e.align,f=void 0===p?"left":p,h=(e.component,e.type,e.fixed),b=e._visible,v=r(e,["grid","name","bindPath","bindField","title","width","flexGrow","required","align","component","type","fixed","_visible"]);return{name:t=t||a.replace(".","&"),component:"DataGrid.Column",columnKey:t,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:[{name:"label",component:"::label",className:s?"ant-form-item-required":"",children:l}]},cell:o({name:"cell",component:"{{$isFocus(_ctrlPath) ? 'Checkbox' : 'DataGrid.TextCell'}}",className:"{{$getCellClassName(_ctrlPath,'"+f+"')}}",checked:"{{"+i+"[_rowIndex]."+a+"}}",onChange:"{{(e)=> $cellChange('"+n+"', _rowIndex, '"+a+"', e.target.checked)}}",value:"{{"+i+"[_rowIndex]."+a+" ? '是': '否'}}",_power:"({rowIndex})=>rowIndex"},v),fixed:h,_visible:b}}(n);break;case"text":l=function(e){var n=e.name,t=e.bindPath,a=e.bindField,l=e.title,d=e.width,c=void 0===d?130:d,u=e.flexGrow,m=void 0===u?1:u,s=(e.required,e.align),p=void 0===s?"left":s,f=(e.component,e.type,e.fixed),h=e._visible,b=r(e,["name","bindPath","bindField","title","width","flexGrow","required","align","component","type","fixed","_visible"]);return{name:n=n||a.replace(".","&"),component:"DataGrid.Column",columnKey:n,flexGrow:m,width:c,header:{name:"header",component:"DataGrid.Cell",children:l},cell:o({name:"cell",component:"DataGrid.Cell",className:"f-table-cell f-table-cell-"+p+" f-table-cell-disabled",children:"{{"+(0,i.fixPath)(t+"[_rowIndex]."+a)+"}}",_power:"({rowIndex})=>rowIndex"},b),fixed:f,_visible:h}}(n);break;default:l=e}c.columns.push(l)}),c}},e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};n.default={iconButton:function(e){var n=e.icon,t=void 0===n?"plus":n,i=e.title,r=e.onClick,a=e.fontFamily,l=void 0===a?"awesome":a,d=e.type,c=void 0===d?"softly":d,u=e.key,m=void 0===u?i:u,s=(e.component,function(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}(e,["icon","title","onClick","fontFamily","type","key","component"]));return o({name:m,component:"Button",className:"common-icon-button",type:c,iconFontFamily:l,title:i,icon:t,onClick:r?"{{$"+r+"(data)}}":void 0},s)}},e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};n.default={button:function(e){var n=e.title,t=e.onClick,i=e.type,r=void 0===i?"blueSky":i,a=e.key,l=void 0===a?n:a,d=(e.component,function(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}(e,["title","onClick","type","key","component"]));return o({name:l,component:"Button",type:r,children:n,onClick:t?"{{$"+t+"(data)}}":void 0},d)}},e.exports=n.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={sortMenu:function(e){var n=e.bindPath,t=e.selectedClassName,o=e.onClick,i=e.options,r=void 0===i?[]:i,a=(e.component,function(e,n){var t={};for(var o in e)n.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}(e,["bindPath","selectedClassName","onClick","options","component"]),{name:"sort",component:"Dropdown",overlay:{name:"menu",component:"Menu",onClick:o?"{{$"+o+"}}":void 0,children:[]},children:{name:"sort",component:"Button",className:"common-icon-button",type:"softly",iconFontFamily:"awesome",icon:"sort-amount-desc"}});return r.forEach(function(e){a.overlay.children.push({name:e.key,component:"Menu.Item",key:e.key,className:"{{"+(n||"data.filter.orderBy")+" == '"+e.key+"' ? '"+(t||"sort-selected")+"':'' }}",children:[e.title,{name:"checked",component:"Icon",type:"check",_visible:"{{"+(n||"data.filter.orderBy")+" == '"+e.key+"'}}"}]})}),a}},e.exports=n.default},function(e){e.exports={isMKApp:!0,name:"mk-website-preset",description:"mk-website-preset",version:"1.0.0",license:"MIT",author:"",keywords:["mk","monkey king","react","redux","mk-js","mk-command","mk-website-preset"],repository:{type:"git",url:"https://github.com/whatsmk/mk-website-preset.git"},bugs:{url:"https://github.com/whatsmk/mk-website-preset/issues"},homepage:"https://github.com/whatsmk/mk-website-preset#readme",scripts:{start:"mk start",build:"mk build",pkg:"mk pkg"},dependencies:{md5:"*","mk-command":"*","mk-sdk":"*"}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});t(4),function(e){e&&e.__esModule}(t(0));n.default={},e.exports=n.default},function(e,n,t){"use strict";t(4).fetch.mockData},function(e,n,t){},,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};n.default=function(e){var n=new i.action(e),t=new l(o({},e,{metaAction:n})),r=o({},n,t);return n.config({metaHandlers:r}),r};a(t(19));var i=t(1),r=a(t(0));function a(e){return e&&e.__esModule?e:{default:e}}var l=function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.onInit=function(e){var n=e.component,o=e.injections;t.component=n,t.injections=o,o.reduce("init")},this.metaAction=n.metaAction,this.config=r.default.current};e.exports=n.default},function(e,n){e.exports=t},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};n.default=function(e){var n=new i.reducer(e),t=new l(o({},e,{metaReducer:n}));return o({},n,t)};t(21);var i=t(1),r=function(e){return e&&e.__esModule?e:{default:e}}(t(0)),a=t(3);var l=function e(n){var t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e,n){return t.metaReducer.init(e,(0,a.getInitState)())},this.metaReducer=n.metaReducer,this.config=r.default.current};e.exports=n.default},function(e,n){e.exports=o}])});